
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>XML Editor</title>
</head>
<body>
  <h2>Upload XML and Edit Values</h2>
  <input type="file" id="xmlFile" accept=".xml"><br><br>

  <label for="applianceName">Appliance Name:</label>
  <input type="text" id="applianceName"><br><br>

  <label for="wifiSSID">WiFi SSID:</label>
  <input type="text" id="wifiSSID"><br><br>

  <button onclick="downloadModifiedXML()">Download Modified XML</button>

  <script>
    let originalXML = null;

    document.getElementById('xmlFile').addEventListener('change', function(event) {
      const reader = new FileReader();
      reader.onload = function() {
        originalXML = new DOMParser().parseFromString(reader.result, "application/xml");

        const applianceNode = [...originalXML.getElementsByTagName("string")]
          .find(node => node.getAttribute("label") === "Appliance Name" && node.getAttribute("id") === "741");
        const wifiNode = [...originalXML.getElementsByTagName("string")]
          .find(node => node.getAttribute("label") === "WiFi SSID" && node.getAttribute("id") === "2625");

        if (applianceNode) {
          document.getElementById("applianceName").value = applianceNode.textContent;
        }
        if (wifiNode) {
          document.getElementById("wifiSSID").value = wifiNode.textContent;
        }
      };
      reader.readAsText(event.target.files[0]);
    });

    function downloadModifiedXML() {
      if (!originalXML) return alert("Please upload an XML file first.");

      const applianceNode = [...originalXML.getElementsByTagName("string")]
        .find(node => node.getAttribute("label") === "Appliance Name" && node.getAttribute("id") === "741");
      const wifiNode = [...originalXML.getElementsByTagName("string")]
        .find(node => node.getAttribute("label") === "WiFi SSID" && node.getAttribute("id") === "2625");

      if (applianceNode) {
        applianceNode.textContent = document.getElementById("applianceName").value;
      }
      if (wifiNode) {
        wifiNode.textContent = document.getElementById("wifiSSID").value;
      }

      const serializer = new XMLSerializer();
      const xmlStr = serializer.serializeToString(originalXML);
      const blob = new Blob([xmlStr], { type: "application/xml" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "modified.xml";
      link.click();
    }
  </script>
</body>
</html>
